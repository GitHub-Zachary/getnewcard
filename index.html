<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardCraft - Free Business Card Maker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f0f2f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        header { background: white; padding: 1rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .logo { font-size: 24px; font-weight: bold; color: #6366f1; }
        .nav { display: flex; gap: 20px; }
        .nav a { text-decoration: none; color: #666; }
        .cta-btn { background: #6366f1; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; }
        
        .hero { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 60px 0; text-align: center; }
        .hero h1 { font-size: 48px; margin-bottom: 20px; }
        .hero p { font-size: 20px; margin-bottom: 30px; }
        .hero-btn { background: white; color: #6366f1; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 10px; }
        
        .editor { background: white; padding: 40px 0; }
        .toolbar { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .toolbar button { padding: 10px 15px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 4px; cursor: pointer; }
        .toolbar button:hover { background: #6366f1; color: white; }
        .toolbar button:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .editor-layout { display: grid; grid-template-columns: 200px 1fr 250px; gap: 20px; margin-top: 20px; }
        
        .templates { background: #f8f9fa; padding: 20px; border-radius: 8px; }
        .templates h3 { margin-bottom: 15px; }
        .template-grid { display: grid; gap: 10px; }
        .template-item { padding: 15px; background: white; border: 2px solid #e0e0e0; border-radius: 6px; cursor: pointer; text-align: center; font-size: 14px; }
        .template-item:hover, .template-item.active { border-color: #6366f1; background: #f0f4ff; }
        
        .canvas-area { display: flex; justify-content: center; align-items: center; background: #f8f9fa; border-radius: 8px; min-height: 400px; }
        .canvas { width: 350px; height: 200px; background: white; position: relative; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); overflow: hidden; }
        
        .element { position: absolute; cursor: move; border: 2px solid transparent; padding: 2px; user-select: none; }
        .element:hover, .element.selected { border-color: #6366f1; background: rgba(99, 102, 241, 0.1); }
        
        .properties { background: #f8f9fa; padding: 20px; border-radius: 8px; }
        .properties h3 { margin-bottom: 15px; }
        .prop-group { margin-bottom: 15px; }
        .prop-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .prop-group input, .prop-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        
        .features { padding: 60px 0; background: #f8f9fa; }
        .features h2 { text-align: center; font-size: 36px; margin-bottom: 40px; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .feature { background: white; padding: 30px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .feature-icon { font-size: 48px; margin-bottom: 20px; }
        
        footer { background: #333; color: white; padding: 30px 0; text-align: center; }
        
        @media (max-width: 768px) {
            .editor-layout { grid-template-columns: 1fr; }
            .canvas { width: 300px; height: 170px; }
            .hero h1 { font-size: 32px; }
            .nav { display: none; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">CardCraft</div>
            <nav class="nav">
                <a href="#editor">Editor</a>
                <a href="#templates">Templates</a>
                <a href="#features">Features</a>
            </nav>
            <a href="#editor" class="cta-btn">Start Creating</a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Create Professional Business Cards</h1>
            <p>Drag, drop, design - it's that simple!</p>
            <button class="hero-btn" onclick="document.getElementById('editor').scrollIntoView()">Start Designing Now</button>
        </div>
    </section>

    <section id="editor" class="editor">
        <div class="container">
            <div class="toolbar">
                <button id="undoBtn" onclick="undo()" disabled>↶ Undo</button>
                <button id="redoBtn" onclick="redo()" disabled>↷ Redo</button>
                <button onclick="addText()">+ Add Text</button>
                <button onclick="addShape()">+ Add Shape</button>
                <button onclick="addAvatar()">+ Add Avatar</button>
                <button onclick="downloadCard()" style="background: #28a745; color: white;">📥 Download</button>
            </div>
            
            <div class="editor-layout">
                <div class="templates">
                    <h3>Templates</h3>
                    <div class="template-grid">
                        <div class="template-item active" onclick="loadTemplate('modern'); setActive(this)">
                            <div style="background: #6366f1; height: 20px; border-radius: 4px; margin-bottom: 8px;"></div>
                            Modern
                        </div>
                        <div class="template-item" onclick="loadTemplate('classic'); setActive(this)">
                            <div style="background: #059669; height: 20px; border-radius: 4px; margin-bottom: 8px;"></div>
                            Classic
                        </div>
                        <div class="template-item" onclick="loadTemplate('creative'); setActive(this)">
                            <div style="background: #dc2626; height: 20px; border-radius: 4px; margin-bottom: 8px;"></div>
                            Creative
                        </div>
                    </div>
                </div>
                
                <div class="canvas-area">
                    <div id="canvas" class="canvas"></div>
                </div>
                
                <div class="properties">
                    <h3>Properties</h3>
                    <div id="props">
                        <p style="color: #666; text-align: center; margin-top: 50px;">Select an element to edit</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2>Why Choose CardCraft?</h2>
            <div class="features-grid">
                <div class="feature">
                    <div class="feature-icon">🎨</div>
                    <h3>Drag & Drop</h3>
                    <p>Easy visual editor with complete freedom to design your card.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">↶</div>
                    <h3>Undo/Redo</h3>
                    <p>Never lose your work with full undo and redo functionality.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">📱</div>
                    <h3>Mobile Friendly</h3>
                    <p>Design on any device - desktop, tablet, or mobile.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">⚡</div>
                    <h3>Instant Download</h3>
                    <p>Export high-resolution files ready for printing.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">💰</div>
                    <h3>100% Free</h3>
                    <p>No subscriptions or hidden fees. Create unlimited cards.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 CardCraft. Professional business card maker - completely free.</p>
        </div>
    </footer>

    <script>
        let selected = null;
        let dragging = false;
        let offset = { x: 0, y: 0 };
        let history = [];
        let historyIndex = -1;
        let counter = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadTemplate('modern');
            saveState();
        });

        // History functions
        function saveState() {
            const canvas = document.getElementById('canvas');
            if (historyIndex < history.length - 1) {
                history = history.slice(0, historyIndex + 1);
            }
            history.push(canvas.innerHTML);
            historyIndex++;
            if (history.length > 20) {
                history.shift();
                historyIndex--;
            }
            updateButtons();
        }

        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                document.getElementById('canvas').innerHTML = history[historyIndex];
                reattach();
                updateButtons();
                clearSelection();
            }
        }

        function redo() {
            if (historyIndex < history.length - 1) {
                historyIndex++;
                document.getElementById('canvas').innerHTML = history[historyIndex];
                reattach();
                updateButtons();
                clearSelection();
            }
        }

        function updateButtons() {
            document.getElementById('undoBtn').disabled = historyIndex <= 0;
            document.getElementById('redoBtn').disabled = historyIndex >= history.length - 1;
        }

        // Template functions
        function setActive(element) {
            document.querySelectorAll('.template-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
        }

        function loadTemplate(name) {
            const canvas = document.getElementById('canvas');
            const templates = {
                modern: `
                    <div class="element" style="left: 30px; top: 25px; font-size: 20px; font-weight: bold; color: #6366f1;" data-type="text">John Smith</div>
                    <div class="element" style="left: 30px; top: 55px; font-size: 14px; color: #666;" data-type="text">Product Manager</div>
                    <div class="element" style="left: 270px; top: 25px; width: 60px; height: 60px; background: #f0f4ff; border: 2px solid #6366f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6366f1; font-size: 20px;" data-type="avatar">👤</div>
                    <div class="element" style="left: 30px; top: 110px; font-size: 12px; color: #666;" data-type="text">📧 john@company.com</div>
                    <div class="element" style="left: 30px; top: 130px; font-size: 12px; color: #666;" data-type="text">📱 +1 (555) 123-4567</div>
                    <div class="element" style="left: 30px; top: 150px; font-size: 12px; color: #666;" data-type="text">🌐 www.company.com</div>
                `,
                classic: `
                    <div class="element" style="left: 40px; top: 30px; font-size: 18px; font-weight: bold; color: #059669;" data-type="text">JOHN SMITH</div>
                    <div class="element" style="left: 40px; top: 58px; font-size: 13px; color: #065f46;" data-type="text">Senior Manager</div>
                    <div class="element" style="left: 270px; top: 25px; width: 50px; height: 50px; background: #f0fdf4; border: 2px solid #059669; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #059669; font-size: 18px;" data-type="avatar">👤</div>
                    <div class="element" style="left: 40px; top: 120px; font-size: 11px; color: #666;" data-type="text">Email: john@abc.com</div>
                    <div class="element" style="left: 40px; top: 140px; font-size: 11px; color: #666;" data-type="text">Phone: +1 (555) 123-4567</div>
                    <div class="element" style="left: 40px; top: 160px; font-size: 11px; color: #666;" data-type="text">www.abccorp.com</div>
                `,
                creative: `
                    <div class="element" style="left: 30px; top: 20px; font-size: 22px; font-weight: bold; color: #dc2626;" data-type="text">Creative Name</div>
                    <div class="element" style="left: 30px; top: 50px; font-size: 14px; color: #991b1b; font-style: italic;" data-type="text">Designer & Artist</div>
                    <div class="element" style="left: 260px; top: 20px; width: 60px; height: 60px; background: #fef2f2; border: 2px solid #dc2626; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #dc2626; font-size: 20px;" data-type="avatar">🎨</div>
                    <div class="element" style="left: 30px; top: 85px; width: 200px; height: 2px; background: #dc2626;" data-type="shape"></div>
                    <div class="element" style="left: 30px; top: 110px; font-size: 12px; color: #666;" data-type="text">📧 hello@creative.studio</div>
                    <div class="element" style="left: 30px; top: 130px; font-size: 12px; color: #666;" data-type="text">📱 +1 (555) 987-6543</div>
                `
            };
            canvas.innerHTML = templates[name] || templates.modern;
            reattach();
            clearSelection();
            saveState();
        }

        // Element functions
        function addText() {
            const canvas = document.getElementById('canvas');
            counter++;
            const el = document.createElement('div');
            el.className = 'element';
            el.style.cssText = 'left: 50px; top: 50px; font-size: 14px; color: #333;';
            el.setAttribute('data-type', 'text');
            el.textContent = 'New Text ' + counter;
            canvas.appendChild(el);
            attach(el);
            select(el);
            saveState();
        }

        function addShape() {
            const canvas = document.getElementById('canvas');
            counter++;
            const el = document.createElement('div');
            el.className = 'element';
            el.style.cssText = 'left: 100px; top: 100px; width: 80px; height: 40px; background: #6366f1; border-radius: 4px;';
            el.setAttribute('data-type', 'shape');
            canvas.appendChild(el);
            attach(el);
            select(el);
            saveState();
        }

        function addAvatar() {
            const canvas = document.getElementById('canvas');
            counter++;
            const el = document.createElement('div');
            el.className = 'element';
            el.style.cssText = 'left: 80px; top: 80px; width: 60px; height: 60px; background: #f3f4f6; border: 2px solid #d1d5db; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6b7280; font-size: 20px;';
            el.setAttribute('data-type', 'avatar');
            el.textContent = '👤';
            canvas.appendChild(el);
            attach(el);
            select(el);
            saveState();
        }

        // Selection and dragging
        function select(el) {
            clearSelection();
            selected = el;
            el.classList.add('selected');
            showProps(el);
        }

        function clearSelection() {
            if (selected) {
                selected.classList.remove('selected');
                selected = null;
            }
            document.getElementById('props').innerHTML = '<p style="color: #666; text-align: center; margin-top: 50px;">Select an element to edit</p>';
        }

        function attach(el) {
            el.addEventListener('mousedown', startDrag);
            el.addEventListener('click', function(e) {
                e.stopPropagation();
                select(el);
            });
            if (el.getAttribute('data-type') === 'text') {
                el.addEventListener('dblclick', function() {
                    el.contentEditable = true;
                    el.focus();
                });
                el.addEventListener('blur', function() {
                    el.contentEditable = false;
                    saveState();
                });
            }
        }

        function reattach() {
            document.querySelectorAll('.element').forEach(attach);
        }

        function startDrag(e) {
            if (e.target.contentEditable === 'true') return;
            dragging = true;
            select(e.target);
            const rect = e.target.getBoundingClientRect();
            const canvasRect = document.getElementById('canvas').getBoundingClientRect();
            offset.x = e.clientX - rect.left;
            offset.y = e.clientY - rect.top;
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
            e.preventDefault();
        }

        function drag(e) {
            if (!dragging || !selected) return;
            const canvas = document.getElementById('canvas');
            const canvasRect = canvas.getBoundingClientRect();
            let x = e.clientX - canvasRect.left - offset.x;
            let y = e.clientY - canvasRect.top - offset.y;
            x = Math.max(0, Math.min(x, canvas.offsetWidth - selected.offsetWidth));
            y = Math.max(0, Math.min(y, canvas.offsetHeight - selected.offsetHeight));
            selected.style.left = x + 'px';
            selected.style.top = y + 'px';
        }

        function stopDrag() {
            if (dragging) {
                dragging = false;
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', stopDrag);
                saveState();
            }
        }

        // Properties
        function showProps(el) {
            const type = el.getAttribute('data-type');
            let html = '<div class="prop-group"><label>Position</label>';
            html += '<input type="number" value="' + parseInt(el.style.left) + '" onchange="updateProp(\'left\', this.value + \'px\')">';
            html += '<input type="number" value="' + parseInt(el.style.top) + '" onchange="updateProp(\'top\', this.value + \'px\')">';
            html += '</div>';
            
            if (type === 'text') {
                html += '<div class="prop-group"><label>Text</label>';
                html += '<input type="text" value="' + el.textContent + '" onchange="updateText(this.value)">';
                html += '</div>';
                html += '<div class="prop-group"><label>Font Size</label>';
                html += '<input type="number" value="' + (parseInt(el.style.fontSize) || 14) + '" onchange="updateProp(\'fontSize\', this.value + \'px\')">';
                html += '</div>';
                html += '<div class="prop-group"><label>Color</label>';
                html += '<input type="color" value="' + (el.style.color || '#333333') + '" onchange="updateProp(\'color\', this.value)">';
                html += '</div>';
            } else if (type === 'shape') {
                html += '<div class="prop-group"><label>Width</label>';
                html += '<input type="number" value="' + (parseInt(el.style.width) || 80) + '" onchange="updateProp(\'width\', this.value + \'px\')">';
                html += '</div>';
                html += '<div class="prop-group"><label>Height</label>';
                html += '<input type="number" value="' + (parseInt(el.style.height) || 40) + '" onchange="updateProp(\'height\', this.value + \'px\')">';
                html += '</div>';
                html += '<div class="prop-group"><label>Background</label>';
                html += '<input type="color" value="' + (el.style.backgroundColor || '#6366f1') + '" onchange="updateProp(\'backgroundColor\', this.value)">';
                html += '</div>';
            } else if (type === 'avatar') {
                html += '<div class="prop-group"><label>Size</label>';
                html += '<input type="number" value="' + (parseInt(el.style.width) || 60) + '" onchange="updateAvatarSize(this.value)">';
                html += '</div>';
            }
            
            html += '<div class="prop-group">';
            html += '<button onclick="deleteElement()" style="background: #dc2626; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; width: 100%;">Delete</button>';
            html += '</div>';
            
            document.getElementById('props').innerHTML = html;
        }

        function updateProp(prop, value) {
            if (selected) {
                selected.style[prop] = value;
                saveState();
            }
        }

        function updateText(text) {
            if (selected && selected.getAttribute('data-type') === 'text') {
                selected.textContent = text;
                saveState();
            }
        }

        function updateAvatarSize(size) {
            if (selected && selected.getAttribute('data-type') === 'avatar') {
                selected.style.width = size + 'px';
                selected.style.height = size + 'px';
                saveState();
            }
        }

        function deleteElement() {
            if (selected) {
                selected.remove();
                clearSelection();
                saveState();
            }
        }

        // Download
        function downloadCard() {
            const canvas = document.getElementById('canvas');
            const tempCanvas = document.createElement('canvas');
            const ctx = tempCanvas.getContext('2d');
            
            tempCanvas.width = 700;
            tempCanvas.height = 400;
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 700, 400);
            
            const elements = canvas.querySelectorAll('.element');
            elements.forEach(el => {
                const type = el.getAttribute('data-type');
                const x = (parseInt(el.style.left) || 0) * 2;
                const y = (parseInt(el.style.top) || 0) * 2;
                
                if (type === 'text') {
                    const fontSize = (parseInt(el.style.fontSize) || 14) * 2;
                    ctx.font = fontSize + 'px Arial';
                    ctx.fillStyle = el.style.color || '#333333';
                    ctx.fillText(el.textContent, x, y + fontSize);
                } else if (type === 'shape') {
                    const width = (parseInt(el.style.width) || 80) * 2;
                    const height = (parseInt(el.style.height) || 40) * 2;
                    ctx.fillStyle = el.style.backgroundColor || '#6366f1';
                    ctx.fillRect(x, y, width, height);
                } else if (type === 'avatar') {
                    const size = (parseInt(el.style.width) || 60) * 2;
                    ctx.fillStyle = el.style.backgroundColor || '#f3f4f6';
                    ctx.beginPath();
                    ctx.arc(x + size/2, y + size/2, size/2, 0, 2 * Math.PI);
                    ctx.fill();
                    ctx.font = (size/3) + 'px Arial';
                    ctx.fillStyle = el.style.color || '#6b7280';
                    ctx.textAlign = 'center';
                    ctx.fillText(el.textContent || '👤', x + size/2, y + size/2 + size/8);
                    ctx.textAlign = 'left';
                }
            });
            
            const link = document.createElement('a');
            link.download = 'business-card.png';
            link.href = tempCanvas.toDataURL();
            link.click();
        }

        // Canvas click to deselect
        document.getElementById('canvas').addEventListener('click', function(e) {
            if (e.target === this) {
                clearSelection();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'z') {
                e.preventDefault();
                undo();
            } else if (e.ctrlKey && e.key === 'y') {
                e.preventDefault();
                redo();
            } else if (e.key === 'Delete' && selected) {
                deleteElement();
            }
        });
    </script>
</body>
</html>
